!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],e):e(t.FroalaEditor)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,Object.assign(t.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),t.PLUGINS.charCounter=function(e){var n,r=e.$;function o(){return(e.el.textContent||"").replace(/\u200B/g,"").length}function a(n){if(e.opts.charCounterMax<0)return!0;if(o()<e.opts.charCounterMax)return!0;var r=n.which;return!(!e.keys.ctrlKey(n)&&e.keys.isCharacter(r)||r===t.KEYCODE.IME)||(n.preventDefault(),n.stopPropagation(),e.events.trigger("charCounter.exceeded"),!1)}function c(t){return e.opts.charCounterMax<0?t:r("<div>").html(t).text().length+o()<=e.opts.charCounterMax?t:(e.events.trigger("charCounter.exceeded"),"")}function u(){if(e.opts.charCounterCount){var t=o()+(0<e.opts.charCounterMax?"/"+e.opts.charCounterMax:"");n.text("".concat(e.language.translate("Characters")," : ").concat(t)),e.opts.toolbarBottom&&n.css("margin-bottom",e.$tb.outerHeight(!0));var r=e.$wp.get(0).offsetWidth-e.$wp.get(0).clientWidth;0<=r&&("rtl"==e.opts.direction?n.css("margin-left",r):n.css("margin-right",r))}}return{_init:function(){return!!e.$wp&&!!e.opts.charCounterCount&&((n=r(document.createElement("span")).attr("class","fr-counter")).css("bottom",e.$wp.css("border-bottom-width")),e.$second_tb&&e.$second_tb.append(n),e.events.on("keydown",a,!0),e.events.on("paste.afterCleanup",c),e.events.on("keyup contentChanged input",function(){e.events.trigger("charCounter.update")}),e.events.on("charCounter.update",u),e.events.trigger("charCounter.update"),void e.events.on("destroy",function(){r(e.o_win).off("resize.char"+e.id),n.removeData().remove(),n=null}))},count:o}}});