!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,Object.assign(e.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"],quickInsertEnabled:!0}),e.QUICK_INSERT_BUTTONS={},e.DefineIcon("quickInsert",{SVG_KEY:"add",template:"svg"}),e.RegisterQuickInsertButton=function(t,i){e.QUICK_INSERT_BUTTONS[t]=Object.assign({undo:!0},i)},e.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var e=this,t=e.$;e.shared.$qi_image_input||(e.shared.$qi_image_input=t(document.createElement("input")).attr("accept","image/"+e.opts.imageAllowedTypes.join(", image/").toLowerCase()).attr("name","quickInsertImage"+this.id).attr("style","display: none;").attr("type","file"),t("body").first().append(e.shared.$qi_image_input),e.events.$on(e.shared.$qi_image_input,"change",function(){var e=t(this).data("inst");this.files&&(e.quickInsert.hide(),e.image.upload(this.files)),t(this).val("")},!0)),e.$qi_image_input=e.shared.$qi_image_input,e.helpers.isMobile()&&e.selection.save(),e.events.disableBlur(),e.$qi_image_input.data("inst",e)[0].click()}}),e.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of the video you want to insert."));e&&this.video.insertByURL(e)}}),e.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of any web content you want to insert."));e&&this.embedly.add(e)}}),e.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),e.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),e.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),e.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),e.PLUGINS.quickInsert=function(t){var i,n,s=t.$;function r(r){var o,a,l;if(o=r.offset().top-t.$box.offset().top,a=(t.$iframe&&t.$iframe.offset().left||0)+r.offset().left<i.outerWidth()?r.offset().left+i.outerWidth():0-i.outerWidth(),t.opts.enter!=e.ENTER_BR?l=(i.outerHeight()-r.outerHeight())/2:(s(document.createElement("span")).html(e.INVISIBLE_SPACE).insertAfter(r),l=(i.outerHeight()-r.next().outerHeight())/2,r.next().remove()),t.opts.iframe){var c=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top"));o+=t.$iframe.offset().top+c}i.hasClass("fr-on")&&0<=o&&n.css("top",o-l),0<=o&&o-Math.abs(l)<=t.$box.outerHeight()-r.outerHeight()?(i.hasClass("fr-hidden")&&(i.hasClass("fr-on")&&u(),i.removeClass("fr-hidden")),i.css("top",o-l)):i.hasClass("fr-visible")&&(i.addClass("fr-hidden"),d()),i.css("left",a)}function o(o){i||(t.shared.$quick_insert||(t.shared.$quick_insert=s(document.createElement("div")).attr("class","fr-quick-insert").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Quick Insert")+'">'+t.icon.create("quickInsert")+"</a>")),i=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",function(){s("body").first().append(i.removeClass("fr-on")),n&&(d(),s("body").first().append(n.css("left",-9999).css("top",-9999)))},!0),t.events.on("shared.destroy",function(){i.html("").removeData().remove(),i=null,n&&(n.html("").removeData().remove(),n=null)},!0),t.events.on("commands.before",l),t.events.on("commands.after",function(){t.popups.areVisible()||a()}),t.events.bindClick(t.$box,".fr-quick-insert > a",u),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",function(i){var n=s(i.currentTarget).data("cmd");if(!1===t.events.trigger("quickInsert.commands.before",[n]))return!1;e.QUICK_INSERT_BUTTONS[n].callback.apply(t,[i.currentTarget]),e.QUICK_INSERT_BUTTONS[n].undo&&t.undo.saveStep(),t.events.trigger("quickInsert.commands.after",[n]),t.quickInsert.hide()}),t.events.$on(t.$wp,"scroll",c),t.events.$on(t.$tb,"transitionend",".fr-more-toolbar",c)),i.hasClass("fr-on")&&d(),t.$box.append(i),r(o),i.data("tag",o),i.addClass("fr-visible")}function a(){if(t.core.hasFocus()){var n=t.selection.element();if(t.opts.enter==e.ENTER_BR||t.node.isBlock(n)||(n=t.node.blockParent(n)),t.opts.enter==e.ENTER_BR&&!t.node.isBlock(n)){var r=t.node.deepestParent(n);r&&(n=r)}n&&(t.opts.enter!=e.ENTER_BR&&t.node.isEmpty(n)&&0<=t.opts.quickInsertTags.indexOf(n.tagName.toLowerCase())||t.opts.enter==e.ENTER_BR&&("BR"==n.tagName&&(!n.previousSibling||"BR"==n.previousSibling.tagName||t.node.isBlock(n.previousSibling))||t.node.isEmpty(n)&&(!n.previousSibling||"BR"==n.previousSibling.tagName||t.node.isBlock(n.previousSibling))&&(!n.nextSibling||"BR"==n.nextSibling.tagName||t.node.isBlock(n.nextSibling))))?i&&i.data("tag").is(s(n))&&i.hasClass("fr-on")?d():t.selection.isCollapsed()&&o(s(n)):l()}}function l(){i&&(i.hasClass("fr-on")&&d(),i.removeClass("fr-visible fr-on"),i.css("left",-9999).css("top",-9999))}function u(r){if(r&&r.preventDefault(),i.hasClass("fr-on")&&!i.hasClass("fr-hidden"))d();else{if(!t.shared.$qi_helper){for(var o=t.opts.quickInsertButtons,a='<div class="fr-qi-helper">',l=0,u=0;u<o.length;u++){var c=e.QUICK_INSERT_BUTTONS[o[u]];c&&(!c.requiredPlugin||e.PLUGINS[c.requiredPlugin]&&0<=t.opts.pluginsEnabled.indexOf(c.requiredPlugin))&&(a+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(c.title)+'" tabIndex="-1" data-cmd="'+o[u]+'" style="transition-delay: '+.025*l+++'s;">'+t.icon.create(c.icon)+"</a>")}a+="</div>",t.shared.$qi_helper=s(a),t.tooltip.bind(t.shared.$qi_helper,"a.fr-btn"),t.events.$on(t.shared.$qi_helper,"mousedown",function(e){e.preventDefault()},!0)}n=t.shared.$qi_helper,t.$box.append(n),setTimeout(function(){n.css("top",parseFloat(i.css("top"))),n.css("left",parseFloat(i.css("left"))+i.outerWidth()),n.find("a").addClass("fr-size-1"),i.addClass("fr-on")},10)}}function d(){var e=t.$box.find(".fr-qi-helper");e.length&&function(){for(var t=e.find("a"),n=0;n<t.length;n++)!function(i){setTimeout(function(){e.children().eq(t.length-1-i).removeClass("fr-size-1")},25*i)}(n);setTimeout(function(){e.css("left",-9999),i&&!i.hasClass("fr-hidden")&&i.removeClass("fr-on")},25*n)}()}function c(){i.hasClass("fr-visible")&&r(i.data("tag"))}return{_init:function(){if(!t.$wp||!t.opts.quickInsertEnabled)return!1;t.popups.onShow("image.edit",l),t.events.on("mouseup",a),t.helpers.isMobile()&&t.events.$on(s(t.o_doc),"selectionchange",a),t.events.on("blur",l),t.events.on("keyup",a),t.events.on("keydown",function(){setTimeout(function(){a()},0)})},hide:l}}});