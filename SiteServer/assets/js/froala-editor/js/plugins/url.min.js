!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";(e=e&&e.hasOwnProperty("default")?e.default:e).URLRegEx="(^| |\\u00A0)("+e.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}\\.[a-z0-9+-_]{1,}))$",e.PLUGINS.url=function(t){var n=t.$,r=null;function o(e,n,o){for(var i="";o.length&&"."==o[o.length-1];)i+=".",o=o.substring(0,o.length-1);var l=o;if(t.opts.linkConvertEmailAddress)t.helpers.isEmail(l)&&!/^mailto:.*/i.test(l)&&(l="mailto:"+l);else if(t.helpers.isEmail(l))return n+o;return/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(l)||(l="//"+l),(n||"")+"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(r?' rel="'+r+'"':"")+' data-fr-linked="true" href="'+l+'">'+o.replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"+i}function i(){return new RegExp(e.URLRegEx,"gi")}function l(e){return t.opts.linkAlwaysNoFollow&&(r="nofollow"),t.opts.linkAlwaysBlank&&(t.opts.linkNoOpener&&(r?r+=" noopener":r="noopener"),t.opts.linkNoReferrer&&(r?r+=" noreferrer":r="noreferrer")),e.replace(i(),o)}function a(e){var t=e.split(" ");return t[t.length-1]}function s(){var e=t.selection.ranges(0),r=e.startContainer;if(!r||r.nodeType!==Node.TEXT_NODE||e.startOffset!==(r.textContent||"").length)return!1;if(function e(n){return!!n&&("A"===n.tagName||!(!n.parentNode||n.parentNode==t.el)&&e(n.parentNode))}(r))return!1;if(i().test(a(r.textContent))){n(r).before(l(r.textContent));var o=n(r.parentNode).find("a[data-fr-linked]");o.removeAttr("data-fr-linked"),r.parentNode.removeChild(r),t.events.trigger("url.linked",[o.get(0)])}else if(r.textContent.split(" ").length<=2&&r.previousSibling&&"A"===r.previousSibling.tagName){var s=r.previousSibling.innerText+r.textContent;i().test(a(s))&&(n(r.previousSibling).replaceWith(l(s)),r.parentNode.removeChild(r))}}return{_init:function(){t.events.on("keypress",function(e){!t.selection.isCollapsed()||"."!=e.key&&")"!=e.key&&"("!=e.key||s()},!0),t.events.on("keydown",function(n){var r=n.which;!t.selection.isCollapsed()||r!=e.KEYCODE.ENTER&&r!=e.KEYCODE.SPACE||s()},!0),t.events.on("paste.beforeCleanup",function(e){if(t.helpers.isURL(e)){var n=null;return t.opts.linkAlwaysBlank&&(t.opts.linkNoOpener&&(n?n+=" noopener":n="noopener"),t.opts.linkNoReferrer&&(n?n+=" noreferrer":n="noreferrer")),"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(n?' rel="'+n+'"':"")+' href="'+e+'" >'+e+"</a>"}})}}}});