!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,Object.assign(e.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.PLUGINS.save=function(e){var t=e.$,s=null,a=null,n=!1,o=1,r=2,i={};function v(t,s){e.events.trigger("save.error",[{code:t,message:i[t]},s])}function f(s){void 0===s&&(s=e.html.get());var n=s,i=e.events.trigger("save.before",[s]);if(!1===i)return!1;if("string"==typeof i&&(s=i),e.opts.saveURL){var f={};for(var u in e.opts.saveParams)if(e.opts.saveParams.hasOwnProperty(u)){var l=e.opts.saveParams[u];f[u]="function"==typeof l?l.call(this):l}var c={};c[e.opts.saveParam]=s,t(this).ajax({method:e.opts.saveMethod,url:e.opts.saveURL,data:Object.assign(c,f),crossDomain:e.opts.requestWithCORS,withCredentials:e.opts.requestWithCredentials,headers:e.opts.requestHeaders,done:function(t,s,o){a=n,e.events.trigger("save.after",[t])},fail:function(e){v(r,e.response||e.responseText)}})}else v(o)}function u(){clearTimeout(s),s=setTimeout(function(){var t=e.html.get();(a!=t||n)&&(n=!1,f(a=t))},e.opts.saveInterval)}return i[o]="Missing saveURL option.",i[r]="Something went wrong during save.",{_init:function(){e.opts.saveInterval&&(a=e.html.get(),e.events.on("contentChanged",u),e.events.on("keydown destroy",function(){clearTimeout(s)}))},save:f,reset:function(){u(),n=!1},force:function(){n=!0}}},e.DefineIcon("save",{NAME:"floppy-o",FA5NAME:"save"}),e.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"})});