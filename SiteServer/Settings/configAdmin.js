var $api=new apiUtils.Api(apiUrl+"/pages/settings/configAdmin"),data={pageLoad:!1,pageAlert:null,pageType:null,config:null,files:[],uploadUrl:null,adminTitle:null,adminLogoUrl:null,adminWelcomeHtml:null},methods={getConfig:function(){var e=this;$api.get(null,function(i,l){!i&&l&&l.value&&(e.config=_.clone(l.value),e.adminTitle=l.value.adminTitle,e.adminLogoUrl=l.value.adminLogoUrl,e.adminWelcomeHtml=l.value.adminWelcomeHtml||"欢迎使用 SiteServer CMS 管理后台",e.uploadUrl=apiUrl+"/pages/settings/configAdmin/upload?adminToken="+l.adminToken,e.pageType="list",e.pageLoad=!0)})},inputLogo(e,i){Boolean(e)===Boolean(i)&&i.error===e.error||this.$refs.logo.active||(this.$refs.logo.active=!0),e&&i&&e.xhr&&e.success!==i.success&&(this.adminLogoUrl=e.response.value)},getUserRegistrationAttribute:function(e){return e},submit:function(e){var i=this;pageUtils.loading(!0),$api.post({adminTitle:i.adminTitle,adminLogoUrl:i.adminLogoUrl,adminWelcomeHtml:i.adminWelcomeHtml},function(e,l){pageUtils.loading(!1),e?i.pageAlert={type:"danger",html:e.message}:(i.pageAlert={type:"success",html:"管理后台设置保存成功！"},i.config=_.clone(l.value),i.pageType="list")})},btnSubmitClick:function(){var e=this;this.$validator.validate().then(function(i){i&&e.submit(e.item)})}};new Vue({el:"#main",data:data,components:{FileUpload:VueUploadComponent},methods:methods,created:function(){this.getConfig()}});