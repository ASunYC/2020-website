var $api=new apiUtils.Api(apiUrl+"/pages/cms/contentsLayerCopy"),$apiChannels=new apiUtils.Api(apiUrl+"/pages/cms/contentsLayerCopy/actions/getChannels"),data={siteId:parseInt(pageUtils.getQueryString("siteId")),channelId:parseInt(pageUtils.getQueryString("channelId")),channelContentIds:pageUtils.getQueryString("channelContentIds"),pageLoad:!1,pageAlert:null,contents:null,sites:[],channels:[],site:{},channel:null,copyType:"Copy",isSubmit:!1},methods={loadConfig:function(){var e=this;$api.get({siteId:e.siteId,channelId:e.channelId,channelContentIds:e.channelContentIds},function(n,t){!n&&t&&t.value&&(e.contents=t.value,e.sites=t.sites,e.channels=t.channels,e.site=t.site,e.pageLoad=!0)})},onSiteSelect(e){if(e.id!==this.site.id){this.site=e;var n=this;parent.pageUtils.loading(!0),$apiChannels.get({siteId:this.site.id},function(e,t){parent.pageUtils.loading(!1),!e&&t&&t.value&&(n.channels=t.value,n.channel=null)})}},onChannelSelect(e){this.channel=e},btnSubmitClick:function(){this.isSubmit=!0,this.channel&&(parent.pageUtils.loading(!0),$api.post({siteId:this.siteId,channelId:this.channelId,channelContentIds:this.channelContentIds,targetSiteId:this.site.id,targetChannelId:this.channel.id,copyType:this.copyType},function(e,n){!e&&n&&n.value&&parent.location.reload(!0)}))}};Vue.component("multiselect",window.VueMultiselect.default),new Vue({el:"#main",data:data,methods:methods,created:function(){this.loadConfig()}});