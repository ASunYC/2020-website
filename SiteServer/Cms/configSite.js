var $api=new apiUtils.Api(apiUrl+"/pages/cms/configSite?siteId="+pageUtils.getQueryStringByName("siteId")),data={pageLoad:!1,pageAlert:null,pageType:null,siteInfo:null,config:null,files:[],uploadUrl:null,siteName:null,charset:null,pageSize:null,isCreateDoubleClick:null},methods={getConfig:function(){var e=this;$api.get(null,function(i,a){!i&&a&&a.value&&(e.siteInfo=_.clone(a.value),e.config=_.clone(a.config),e.siteName=a.value.siteName,e.charset=a.config.charset,e.pageSize=a.config.pageSize,e.isCreateDoubleClick=a.config.isCreateDoubleClick,e.uploadUrl=apiUrl+"/pages/cms/configSite/upload?adminToken="+a.adminToken,e.pageType="list",e.pageLoad=!0)})},inputLogo(e,i){Boolean(e)===Boolean(i)&&i.error===e.error||this.$refs.logo.active||(this.$refs.logo.active=!0),e&&i&&e.xhr&&e.success!==i.success&&(this.adminLogoUrl=e.response.value)},submit:function(){var e=this;pageUtils.loading(!0),$api.post({siteName:e.siteName,charset:e.charset,pageSize:e.pageSize,isCreateDoubleClick:e.isCreateDoubleClick},function(i,a){pageUtils.loading(!1),i?e.pageAlert={type:"danger",html:i.message}:(e.pageAlert={type:"success",html:"站点设置保存成功！"},e.siteInfo=_.clone(a.value),e.config=_.clone(a.config),e.pageType="list")})},btnSubmitClick:function(){var e=this;this.$validator.validate().then(function(i){i&&e.submit()})},getCharsetName:function(e){switch(e){case"utf-8":return"Unicode (UTF-8)";case"gb2312":return"简体中文 (GB2312)";case"big5":return"繁体中文 (Big5)";case"iso-8859-1":return"西欧 (iso-8859-1)";case"euc-kr":return"韩文 (euc-kr)";case"euc-jp":return"日文 (euc-jp)";case"iso-8859-6":return"阿拉伯文 (iso-8859-6)";case"windows-874":return"泰文 (windows-874)";case"iso-8859-9":return"土耳其文 (iso-8859-9)";case"iso-8859-5":return"西里尔文 (iso-8859-5)";case"iso-8859-8":return"希伯来文 (iso-8859-8)";case"iso-8859-7":return"希腊文 (iso-8859-7)";case"windows-1258":return"越南文 (windows-1258)";case"iso-8859-2":return"中欧 (iso-8859-2)";default:return"Unicode (UTF-8)"}}};new Vue({el:"#main",data:data,components:{FileUpload:VueUploadComponent},methods:methods,created:function(){this.getConfig()}});